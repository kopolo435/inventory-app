<!DOCTYPE html>
<html lang="en">
  <%- include("head_layout",{title}) %>
  <body>
    <h1><%= title %></h1>
    <p><%= user.fullname %></p>
    <p><%= user.cellphone %></p>
    <p><%= user.email %></p>

    <hr />
    <p>Si elimina el usuario, se eliminaran sus pedidos de tener</p>
    <p>Pedidos del usuario:</p>
    <% if (pedidos.length>0) { %>
    <ul>
      <% pedidos.forEach(pedido => { %>
      <li>
        <p><%= pedido.product.name %></p>
        <p><%= pedido.ammount %> unidades solicitadas</p>
        <% if (pedido.orderPlaced) { %>
        <p>Agregado el <%= pedido.orderPlaced %></p>
        <% }else{ %>
        <p>Sin fecha de agregado</p>
        <% } %>
        <a href="<%= pedido.url %>">Ver detalles</a>
        <% }); %>
      </li>
    </ul>
    <% }else{ %>
    <p>Este usuario no ha hecho pedidos</p>
    <% } %>
    <div class="adminContainer">
      <form action="" method="post">
        <div class="textInput">
          <label for="name">
            Nombre de cuenta administrador <input type="text" name="name"
            id="name" value="<%= typeof admin !== "undefined" ? admin.name : ""
            %>" />
          </label>
          <% if (typeof errors.name !== "undefined") { %>
          <p class="textError"><%= errors.name.msg %></p>
          <% } %>
        </div>
        <div class="textInput">
          <label for="password">
            Password <input type="password" name="password" id="password"
            value="<%= typeof admin !== "undefined" ? admin.password : "" %>" />
          </label>
          <% if (typeof errors.password !== "undefined") { %>
          <p class="textError"><%= errors.password.msg %></p>
          <% } %>
        </div>
        <button type="submit">Eliminar Usuario</button>
      </form>
      <% if (typeof validation !== "undefined") { %>
      <p>Error, los datos no coinciden con una cuenta administrativa</p>
      <% } %>
    </div>
  </body>
</html>
